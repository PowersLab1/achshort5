(this.webpackJsonpachshort5=this.webpackJsonpachshort5||[]).push([[0],{151:function(e,t,n){},158:function(e,t,n){e.exports=n.p+"static/media/rating_keydown_1.d9fbf22f.png"},159:function(e,t,n){e.exports=n.p+"static/media/rating_keydown_2.6a659dd4.png"},160:function(e,t,n){e.exports=n.p+"static/media/rating_keydown_3.d955b91a.png"},161:function(e,t,n){e.exports=n.p+"static/media/rating_keydown_4.c8b7c686.png"},162:function(e,t,n){e.exports=n.p+"static/media/rating_keydown_5.34958048.png"},164:function(e,t,n){e.exports=n(348)},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},178:function(e,t){},180:function(e,t){},190:function(e,t){},192:function(e,t){},219:function(e,t){},221:function(e,t){},222:function(e,t){},227:function(e,t){},229:function(e,t){},235:function(e,t){},237:function(e,t){},256:function(e,t){},268:function(e,t){},271:function(e,t){},29:function(e){e.exports=JSON.parse('{"taskVersion":"1.0.0","taskName":"achshort5","debug":false,"awsLambda":{"saveTaskData":{"host":"de8cnjde61.execute-api.us-east-2.amazonaws.com","path":"/default/saveTaskData"},"fetchLink":{"host":"3pnzb6n9vf.execute-api.us-east-2.amazonaws.com","path":"/default/fetchLink"}}}')},30:function(e,t,n){},321:function(e,t,n){},322:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},342:function(e,t){},347:function(e,t,n){},348:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return $e}));var a=n(0),r=n.n(a),l=n(156),o=n.n(l),i=(n(169),n(1)),c=n(2),s=n(4),u=n(3),m=(n(170),n(11)),d=n(31),h=n(54),E=n.n(h);n(171),n(15),n(172);function b(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}var p=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f=function(){var e={background:127.5,angle:Math.floor(135*Math.random())+45,imsize:256,initcontrast:.5,threshold:.2,phases:[0,.25],phase:0,alpha:.5,ppd:80,frequency:0};return e.phase=e.phases[Math.round(Math.random())],e.frequency=2/e.ppd,e}(),v=(function(e,t){e.map((function(e){return f.background+e*f.background*t}))}(function(e){for(var t=[],n=[],a=1;a<e.imsize+1;a++)for(var r=1;r<e.imsize+1;r++)t[4*(a-1+(r-1)*e.imsize)+0]=a-(e.imsize+1)/2,t[4*(a-1+(r-1)*e.imsize)+1]=a-(e.imsize+1)/2,t[4*(a-1+(r-1)*e.imsize)+2]=a-(e.imsize+1)/2,t[4*(a-1+(r-1)*e.imsize)+3]=a-(e.imsize+1)/2,n[4*(a-1+(r-1)*e.imsize)+0]=r-(e.imsize+1)/2,n[4*(a-1+(r-1)*e.imsize)+1]=r-(e.imsize+1)/2,n[4*(a-1+(r-1)*e.imsize)+2]=r-(e.imsize+1)/2,n[4*(a-1+(r-1)*e.imsize)+3]=r-(e.imsize+1)/2;for(var l=[],o=0;o<t.length&&o<n.length;o++)l[o]=.5*Math.cos(2*Math.PI*(e.frequency*(Math.sin(Math.PI/180*e.angle)*t[o]+Math.cos(Math.PI/180*e.angle)*n[o])+e.phase));return l}(f),0),{duration:300,amp:1,frequency:1250});function y(e){g=e}function k(e,t,n,a){!function(e,t,n,a){if(!a)return;var r=a.createOscillator(),l=a.createGain();r.connect(l),r.frequency.value=t,l.connect(a.destination),l.gain.value=T(e,6418e-7,56.3),r.start(a.currentTime),r.stop(a.currentTime+n/1e3)}(a,e.frequency,n||e.duration,t)}var g=80,C=null;function w(e){console.log("Playing white noise via playWhiteNoiseTest at volume (dB):",g);for(var t=3*e.sampleRate,n=e.createBuffer(2,t,e.sampleRate),a=0;a<n.numberOfChannels;a++)for(var r=n.getChannelData(a),l=0;l<t;l++)r[l]=(2*Math.random()-1)*T(g,.015,78.3);C&&C.buffer===n||(C&&(C.stop(),C.disconnect()),(C=e.createBufferSource()).buffer=n,C.loop=!0,C.connect(e.destination),C.start())}function T(e,t,n){return Math.pow(10,(e-n)/20)*t}var O=n(29),N=n(15),S=n(148),x=O.taskName,I=["updatePdf","warnPdf","normalizePdf","tGuess","tGuessSd","pThreshold","xThreshold","beta","delta","gamma","grain","dim","quantileOrder"];function L(){return Y.store.processedData}function R(e){return"component_"+e}function j(e,t,n,a,r,l,o,i){var c=Y.store,s=R(e);c[s]={},c[s].decibels=t,c[s].response=n,c[s].responseTime=a,N.isUndefined(r)||(c[s].ratings=r),N.isUndefined(l)||(c[s].ratingsRaw=l),c[s].timestamps=o,c[s].startTimestamp=i,Y.save()}function P(){return Y.store.encrypted_metadata}function D(){return Y.store.survey_url}function A(){return Y.store.dataSent}function _(e){Y.store.dataSent=e,Y.save()}function F(){if(N.isUndefined(P()))return!1;if(N.isUndefined(Y.store.quest))return!1;if(!O.debug)for(var e=1;e<=4;e++)if(N.isUndefined((t=e,Y.store[R(t)])))return!1;var t;return!0}var Y={get store(){if(N.isUndefined(this._store))if(b()){var e=JSON.parse(localStorage.getItem(x));this._store=e||{}}else this._store={};return this._store},save:function(){b()&&(localStorage.setItem(x,JSON.stringify(this.store)),O.debug&&console.log("saved: "+localStorage.getItem(x)))},clear:function(){O.debug&&console.log("cleared"),this._store=void 0,b()&&localStorage.removeItem(x)}};function U(){var e=P(),t=A();Y.clear(),Y.store.encrypted_metadata=e,Y.store.dataSent=t,Y.save()}var H=n(303),W=n(15),M=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=a.keyFunction.bind(Object(d.a)(a)),a.state={continue:!1,invalid:!1,dataSent:!1},a}return Object(c.a)(n,[{key:"keyFunction",value:function(e){81===e.keyCode&&this.setState((function(e,t){return{continue:!0}}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1);var e,t,n=H.parse(this.props.location.search,{ignoreQueryPrefix:!0});W.isUndefined(n.id)?W.isUndefined(P())&&this.setState({invalid:!0}):(e=n.id)!==Y.store.encrypted_metadata&&(Y.clear(),Y.store.encrypted_metadata=e,Y.save()),W.isUndefined(n.survey_url)||(t=n.survey_url,Y.store.survey_url=t,Y.save()),A()&&this.setState({dataSent:!0})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return this.state.invalid?r.a.createElement(m.a,{to:"/Error"}):this.state.dataSent?r.a.createElement(m.a,{to:"/ThankYou"}):!0===this.state.continue?r.a.createElement(m.a,{to:"/VolumeCalibrationInstructions"}):r.a.createElement("div",{className:"Welcome"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Welcome-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Welcome-text"},r.a.createElement("span",{className:"bigger"},"Welcome to the study! "),r.a.createElement("br",null),r.a.createElement("br",null)," In this task you will be asked to indicate whether you hear a tone being played.",r.a.createElement("br",null),r.a.createElement("br",null),"Please enter responses to the questions asked by pressing the:",r.a.createElement("br",null),r.a.createElement("br",null),"  ",r.a.createElement("font",{size:"+2"}," ",r.a.createElement("b",null," 'Q' key for 'YES I HEAR IT'")," or ",r.a.createElement("b",null," 'E' key for \"NO I DO NOT'")," "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)," Sometimes it may be difficult to answer, but if you do not know, please make your best guess.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)," Please keep your volume (including headphones) and screen brightness at maximum level throughout the experiment.",r.a.createElement("br",null),r.a.createElement("br",null)," Please focus your eyes on the ",r.a.createElement("b",null,"cross in the middle "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)," PRESS the ",r.a.createElement("b",null," YES I HEAR IT / 'Q' key ")," to CONTINUE")),r.a.createElement("a",{href:"https://medicine.yale.edu/psychiatry/care/cmhc/",title:"Learn more about the Connecticut Mental Health Center",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:E.a,className:"Site-link",alt:"logo"}))))}}]),n}(a.Component),q=(n(321),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial_P"}):r.a.createElement("div",{className:"Instructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Instructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Instructions-text"},"Now we can start the Hearing Test!",r.a.createElement("br",null),r.a.createElement("br",null)," Auditory white noise (like static radio) will be played throughout the experiment.",r.a.createElement("br",null),r.a.createElement("br",null)," A tone might play while the white noise continues when there are stripes on the screen.",r.a.createElement("br",null),r.a.createElement("br",null),"Only respond when you see the stripes.",r.a.createElement("br",null),r.a.createElement("br",null)," Please focus your eyes on the ",r.a.createElement("b",null,"cross in the middle "),r.a.createElement("br",null),r.a.createElement("br",null)," Press  ",r.a.createElement("font",{size:"+2"},"  ",r.a.createElement("b",null,' "Q"/YES ')," ")," if you ",r.a.createElement("b",null," DO "),"hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("font",{size:"+2"}," ",r.a.createElement("b",null,' "E"/NO ')," ")," if you ",r.a.createElement("b",null," DO NOT ")," hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES TO BEGIN A SHORT PRACTICE SESSION'))))}}]),n}(a.Component)),V=(n(322),function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}),B=(n(323),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial_TT_1"}):r.a.createElement("div",{className:"Complete"},r.a.createElement("header",{className:"Complete-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Complete-text"},"Congratulations!",r.a.createElement("br",null),r.a.createElement("br",null)," First part of the experiment is over.",r.a.createElement("br",null),r.a.createElement("br",null)," Now we will continue with the next trials. Now, there will be ratings similar to the second practice.",r.a.createElement("br",null),r.a.createElement("br",null)," You will see a rating screen following each presentation of stripes, press",r.a.createElement("br",null),r.a.createElement("br",null)," and then hold the ",r.a.createElement("b",null,' "Q"/YES ')," button or ",r.a.createElement("b",null,' "E"/NO ')," button.",r.a.createElement("br",null),r.a.createElement("br",null)," The longer you hold it down, the more certain you are of your choice.",r.a.createElement("br",null),r.a.createElement("br",null)," If you hold ",r.a.createElement("b",null,' "Q"/YES '),"  button down for a long time, you are very certain that you  ",r.a.createElement("b",null," DO ")," hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," If you hold ",r.a.createElement("b",null,' "E"/NO '),"  button down for a long time, you are very certain that you ",r.a.createElement("b",null," DO NOT ")," hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES WHEN READY TO CONTINUE.'))))}}]),n}(a.Component)),Q=(n(324),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial_P_rating"}):r.a.createElement("div",{className:"Continue"},r.a.createElement("header",{className:"Continue-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Continue-text"},"Great!",r.a.createElement("br",null),r.a.createElement("br",null)," First task complete! You will do the same thing in the next task, with some important differences:",r.a.createElement("br",null),r.a.createElement("br",null)," You will see a rating screen following each presentation of stripes, press",r.a.createElement("br",null),r.a.createElement("br",null)," and then hold the ",r.a.createElement("b",null,' "Q"/YES ')," button or ",r.a.createElement("b",null,' "E"/NO ')," button.",r.a.createElement("br",null),r.a.createElement("br",null)," The longer you hold it down, the more certain you are of your choice.",r.a.createElement("br",null),r.a.createElement("br",null)," If you hold ",r.a.createElement("b",null,' "Q"/YES '),"  button down for a long time, you are very certain that you  ",r.a.createElement("b",null," DO ")," hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," If you hold ",r.a.createElement("b",null,' "E"/NO '),"  button down for a long time, you are very certain that you ",r.a.createElement("b",null," DO NOT ")," hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null)," Please focus your eyes on the ",r.a.createElement("b",null,"cross in the middle "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES WHEN READY TO CONTINUE.'))))}}]),n}(a.Component)),z=(n(325),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/TrialQ"}):r.a.createElement("div",{className:"Continue_rating"},r.a.createElement("header",{className:"Continue_rating-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Continue_rating-text"},"Great!",r.a.createElement("br",null),r.a.createElement("br",null)," You have completed the practice trials. Now onto the real test.",r.a.createElement("br",null),r.a.createElement("br",null),"  It is important to note that the tone in the practice session was there to make sure",r.a.createElement("br",null),r.a.createElement("br",null),"  you understood what to do, with very obvious and impossible-to-hear tones.",r.a.createElement("br",null),r.a.createElement("br",null),"  The tone in the remainder of the experiment",r.a.createElement("br",null),r.a.createElement("br",null),"  may be very difficult to hear so you will have to listen very hard.",r.a.createElement("br",null),r.a.createElement("br",null),"  Sometimes it might be difficult to answer, but if you do not know, please guess.",r.a.createElement("br",null),r.a.createElement("br",null),"  For this first task, you will not be asked to rate your confidence so just quickly press",r.a.createElement("br",null),r.a.createElement("br",null),"  and release the button as soon as the screen flashes with the stripes.",r.a.createElement("br",null),r.a.createElement("br",null)," Please focus your eyes on the ",r.a.createElement("b",null,"cross in the middle "),r.a.createElement("br",null),r.a.createElement("br",null)," Press  ",r.a.createElement("font",{size:"+2"},"  ",r.a.createElement("b",null,' "Q"/YES ')," ")," if you ",r.a.createElement("b",null," DO "),"hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("font",{size:"+2"}," ",r.a.createElement("b",null,' "E"/NO ')," ")," if you ",r.a.createElement("b",null," DO NOT ")," hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null)," There will be scheduled breaks throughout the experiment, but please do not take a break unless instructed.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES TO BEGIN THE EXPERIMENT.'))))}}]),n}(a.Component)),K=(n(30),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).decreaseVolume=function(){a.state.decreaseCount<5&&a.setState((function(e){return{volumeLevel:e.volumeLevel-15,decreaseCount:e.decreaseCount+1}}),(function(){y(a.state.volumeLevel),a.audioContext.close().then((function(){a.audioContext=new AudioContext,a.playNoise()}))}))},a.keyFunction=function(e){81===e.keyCode&&a.setState({continue:!0})},a.state={continue:!1,volumeLevel:80,decreaseCount:0},a.audioContext=new AudioContext,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/VolumeCalibration1"}):r.a.createElement("div",{className:"VolumeInstructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"VolumeInstructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"VolumeInstructions-text"},"BEFORE WE BEGIN: This game plays a white noise in the background. Rarely, it is intolerably loud at first.",r.a.createElement("br",null),r.a.createElement("br",null)," We will play the white noise for you. It should be loud but not intolerable.",r.a.createElement("br",null),r.a.createElement("br",null)," ",r.a.createElement("b",null,"Do not change your computer volume!"),r.a.createElement("br",null),r.a.createElement("br",null)," If the noise is ",r.a.createElement("b",null,"intolerable"),", ",r.a.createElement("b",null,'press "E"')," and we will decrease the volume and play it again.",r.a.createElement("br",null),r.a.createElement("br",null),' ONLY HIT "E" if you ',r.a.createElement("b",null,"absolutely need to"),". REMEMBER it ",r.a.createElement("b",null,"should be loud"),"!",r.a.createElement("br",null),r.a.createElement("br",null),' You will have the option to hit "E" again if it is still intolerably loud',r.a.createElement("br",null),r.a.createElement("br",null)," If the ",r.a.createElement("b",null,"volume is tolerable")," then  ",r.a.createElement("b",null,'press "Q"')," and the game will continue!",r.a.createElement("br",null),r.a.createElement("br",null)," ",r.a.createElement("b",null," Press Q to check the white noise volume")))))}}]),n}(a.Component)),G=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).playNoise=function(){console.log("Calling playWhiteNoiseTest with volume:",a.state.volumeLevel),w(a.audioContext,a.state.volumeLevel)},a.decreaseVolume=function(){a.state.decreaseCount<1&&a.setState((function(e){return{volumeLevel:e.volumeLevel-3,decreaseCount:e.decreaseCount+1}}),(function(){y(a.state.volumeLevel),a.audioContext.close().then((function(){a.audioContext=new AudioContext,a.playNoise(),a.setState({redirect:"/VolumeCalibration2"})}))}))},a.keyFunction=function(e){81===e.keyCode?a.setState({continue:!0}):69===e.keyCode&&a.decreaseVolume()},a.state={continue:!1,volumeLevel:80,decreaseCount:0,redirect:null},a.audioContext=new AudioContext,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),this.playNoise()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Instructions"}):this.state.redirect?r.a.createElement(m.a,{to:this.state.redirect}):r.a.createElement("div",{className:"VolumeInstructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"VolumeInstructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"VolumeInstructions-text"},"Is this noise loud but tolerable?",r.a.createElement("br",null),r.a.createElement("br",null)," IF ACCEPTABLE: ",r.a.createElement("b",null,"Press Q")," to continue to the Hearing Test Instructions",r.a.createElement("br",null),r.a.createElement("br",null)," IF INTOLERABLE: ",r.a.createElement("b",null,"Press E")," to try a lower volume"))))}}]),n}(a.Component),J=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).playNoise=function(){console.log("Calling playWhiteNoiseTest with volume:",a.state.volumeLevel),w(a.audioContext,a.state.volumeLevel)},a.decreaseVolume=function(){a.state.decreaseCount<1&&a.setState((function(e){return{volumeLevel:e.volumeLevel-3,decreaseCount:e.decreaseCount+1}}),(function(){y(a.state.volumeLevel),a.audioContext.close().then((function(){a.audioContext=new AudioContext,a.playNoise(),a.setState({redirect:"/VolumeCalibration3"})}))}))},a.keyFunction=function(e){81===e.keyCode?a.setState({continue:!0}):69===e.keyCode&&a.decreaseVolume()},a.state={continue:!1,volumeLevel:77,decreaseCount:0,redirect:null},a.audioContext=new AudioContext,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),this.playNoise()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Instructions"}):this.state.redirect?r.a.createElement(m.a,{to:this.state.redirect}):r.a.createElement("div",{className:"VolumeInstructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"VolumeInstructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"VolumeInstructions-text"},"Is this volume better?",r.a.createElement("br",null),r.a.createElement("br",null)," IF ACCEPTABLE: ",r.a.createElement("b",null,"Press Q")," to continue to the Hearing Test Instructions",r.a.createElement("br",null),r.a.createElement("br",null)," IF INTOLERABLE: ",r.a.createElement("b",null,"Press E")," to try a lower volume"))))}}]),n}(a.Component),X=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).playNoise=function(){console.log("Calling playWhiteNoiseTest with volume:",a.state.volumeLevel),w(a.audioContext,a.state.volumeLevel)},a.decreaseVolume=function(){a.state.decreaseCount<1&&a.setState((function(e){return{volumeLevel:e.volumeLevel-3,decreaseCount:e.decreaseCount+1}}),(function(){y(a.state.volumeLevel),a.audioContext.close().then((function(){a.audioContext=new AudioContext,a.playNoise(),a.setState({redirect:"/VolumeCalibration4"})}))}))},a.keyFunction=function(e){81===e.keyCode?a.setState({continue:!0}):69===e.keyCode&&a.decreaseVolume()},a.state={continue:!1,volumeLevel:74,decreaseCount:0,redirect:null},a.audioContext=new AudioContext,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),this.playNoise()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Instructions"}):this.state.redirect?r.a.createElement(m.a,{to:this.state.redirect}):r.a.createElement("div",{className:"VolumeInstructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"VolumeInstructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"VolumeInstructions-text"},"How about now?",r.a.createElement("br",null),r.a.createElement("br",null)," IF ACCEPTABLE: ",r.a.createElement("b",null,"Press Q")," to continue to the Hearing Test Instructions",r.a.createElement("br",null),r.a.createElement("br",null)," IF INTOLERABLE: ",r.a.createElement("b",null,"Press E")," to try a lower volume"))))}}]),n}(a.Component),$=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).playNoise=function(){console.log("Calling playWhiteNoiseTest with volume:",a.state.volumeLevel),w(a.audioContext,a.state.volumeLevel)},a.decreaseVolume=function(){a.state.decreaseCount<1&&a.setState((function(e){return{volumeLevel:e.volumeLevel-3,decreaseCount:e.decreaseCount+1}}),(function(){y(a.state.volumeLevel),a.audioContext.close().then((function(){a.audioContext=new AudioContext,a.playNoise(),a.setState({redirect:"/VolumeCalibration5"})}))}))},a.keyFunction=function(e){81===e.keyCode?a.setState({continue:!0}):69===e.keyCode&&a.decreaseVolume()},a.state={continue:!1,volumeLevel:71,decreaseCount:0,redirect:null},a.audioContext=new AudioContext,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),this.playNoise()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Instructions"}):this.state.redirect?r.a.createElement(m.a,{to:this.state.redirect}):r.a.createElement("div",{className:"VolumeInstructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"VolumeInstructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"VolumeInstructions-text"},"Is this volume tolerable (remember: it should still be loud)?",r.a.createElement("br",null),r.a.createElement("br",null)," IF ACCEPTABLE: ",r.a.createElement("b",null,"Press Q")," to continue to the Hearing Test Instructions",r.a.createElement("br",null),r.a.createElement("br",null)," IF INTOLERABLE: ",r.a.createElement("b",null,"Press E")," to try a lower volume"))))}}]),n}(a.Component),Z=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).playNoise=function(){console.log("Calling playWhiteNoiseTest with volume:",a.state.volumeLevel),w(a.audioContext,a.state.volumeLevel)},a.decreaseVolume=function(){a.state.decreaseCount<1&&a.setState((function(e){return{volumeLevel:e.volumeLevel-3,decreaseCount:e.decreaseCount+1}}),(function(){y(a.state.volumeLevel),a.audioContext.close().then((function(){a.audioContext=new AudioContext,a.playNoise(),a.setState({redirect:"/VolumeCalibrationEnd"})}))}))},a.keyFunction=function(e){81===e.keyCode?a.setState({continue:!0}):69===e.keyCode&&a.decreaseVolume()},a.state={continue:!1,volumeLevel:68,decreaseCount:0,redirect:null},a.audioContext=new AudioContext,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),this.playNoise()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Instructions"}):this.state.redirect?r.a.createElement(m.a,{to:this.state.redirect}):r.a.createElement("div",{className:"VolumeInstructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"VolumeInstructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"VolumeInstructions-text"},"Is this volume better (this is close to as low as the volume goes)?",r.a.createElement("br",null),r.a.createElement("br",null)," IF ACCEPTABLE: ",r.a.createElement("b",null,"Press Q")," to continue to the Hearing Test Instructions",r.a.createElement("br",null),r.a.createElement("br",null)," IF INTOLERABLE: ",r.a.createElement("b",null,"Press E")," to try a lower volume"))))}}]),n}(a.Component),ee=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).playNoise=function(){console.log("Calling playWhiteNoiseTest with volume:",a.state.volumeLevel),w(a.audioContext,a.state.volumeLevel)},a.keyFunction=function(e){81===e.keyCode&&a.setState({continue:!0})},a.state={continue:!1,volumeLevel:65,decreaseCount:0,redirect:null},a.audioContext=new AudioContext,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1),this.playNoise()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Instructions"}):r.a.createElement("div",{className:"VolumeInstructions"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"VolumeInstructions-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"VolumeInstructions-text"},"Now we should be all set! Get ready to listen for the tone in the white noise!",r.a.createElement("br",null),r.a.createElement("br",null)," ",r.a.createElement("b",null,"Press Q")," to continue to the Hearing Test Instructions!"))))}}]),n}(a.Component),te=n(163),ne=(n(326),n(151),n(158)),ae=n.n(ne),re=n(159),le=n.n(re),oe=n(160),ie=n.n(oe),ce=n(161),se=n.n(ce),ue=n(162),me=n.n(ue),de=(n(15),n(327),{0:"",1:ae.a,2:le.a,3:ie.a,4:se.a,5:me.a}),he=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"drawCanvas",value:function(){this.resizeCanvas();var e=document.getElementById("c"),t=e.getContext("2d"),n=t.getImageData(0,0,e.width,e.height),a=n.data,r=e.width,l=e.height,o=Math.max(100,e.height/8)/2,i=Math.floor(r/o),c=Math.floor(l/o);for(var s=0;s<r;s++)for(var u=0;u<l;u++)if(this.props.showContrast){var m=Math.abs(Math.floor(Math.sin(6.28*(14*s+14*u))))/2*163;a[4*(s+u*r)+0]=0*m,a[4*(s+u*r)+1]=0*m,a[4*(s+u*r)+2]=m,a[4*(s+u*r)+3]=255}else a[4*(s+u*r)+0]=0,a[4*(s+u*r)+1]=0,a[4*(s+u*r)+2]=0,a[4*(s+u*r)+3]=255;t.putImageData(n,0,0)}},{key:"resizeCanvas",value:function(){var e=document.getElementById("c");e.width=window.innerWidth,e.height=window.innerHeight}},{key:"componentDidMount",value:function(){this.drawCanvas()}},{key:"componentDidUpdate",value:function(e){this.drawCanvas()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:de[this.props.currentRating],width:256,height:256,className:"center",style:{zIndex:101,width:"95vh",height:"50vh",backgroundColor:"black",visibility:this.props.showRatings?"visible":"hidden"}}),r.a.createElement("div",{style:{zIndex:100,backgroundColor:"black",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,visibility:this.props.showRatings?"visible":"hidden"}}),r.a.createElement("canvas",{id:"c",style:{position:"fixed",top:0,left:0,zIndex:1,width:"100%",height:"100%"}}),r.a.createElement("div",{className:"center cross-1",style:{zIndex:10}}),r.a.createElement("div",{className:"center cross-2",style:{zIndex:10}}))}}]),n}(a.Component);he.defaultProps={showContrast:!1,showRatings:!1,contrast:0};var Ee=he,be=n(15),pe=n(29),fe=window.AudioContext||window.webkitAudioContext,ve=(be.map(be.keys({49:1,50:2,51:3,52:4,53:5}),(function(e){return parseInt(e,10)})),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).playStimulus=function(){var e=Object(d.a)(a);if(pe.debug&&e.log_debug(),e.state.index!=e.props.decibels.length)if(e.numAttempts++!=e.numAttemptsLimit){e.setState({responseWindow:!0}),e.startTime=(new Date).getTime(),e.playVisualStimulus(1e3);var t=e.props.decibels[e.state.index];k(v,e.audioContext,1e3,t),a.stimulusTimer=setTimeout(a.playStimulus,e.delay+e.jitter()),a.addTimestamp("stim")}else e.setState({complete:!0});else e.shutdown()},a.recordResponse=function(e){if(a.state.responseWindow&&be.includes([81,69],e.keyCode)){var t=Object(d.a)(a);a.addTimestamp("resp");var n=(new Date).getTime(),r=81===e.keyCode?1:0;if(a.response.push(r),a.responseTime.push(n-a.startTime),a.setState({responseWindow:!1}),a.timebox=null,a.props.responseHandler(r),a.props.shouldRecordRatings){clearTimeout(a.stimulusTimer),a.setState({ratingWindow:!0,currentRating:t.numIterations||1,stopShowingRating:!1,stopIncrementingRating:!1}),t.numIterations=t.numIterations||0,a.ratingStartTime=(new Date).getTime(),function e(){t.numIterations++,t.ratingTimer=setTimeout((function(){if(5==t.numIterations||t.state.stopShowingRating)return t.numIterations=0,t.prevKey=null,void t.finishRatingWindow();t.state.stopIncrementingRating||t.setState({currentRating:t.state.currentRating+1}),e()}),250)}()}else a.prevKey=null,a.setState({index:a.state.index+1})}else a.prevKey=null},a.keyDownFunction=function(e){if(a.state.readyToStart)return a.setState({readyToStart:!1}),a.audioContext.resume(),void a.startTrial();if(be.includes([81,69],e.keyCode)){if(a.isKeyDown[e.keyCode])return;a.isKeyDown[e.keyCode]=!0}null===a.prevKey&&(a.prevKey=e.keyCode),a.prevKey===e.keyCode&&(clearTimeout(a.timebox),a.timebox=setTimeout((function(){a.setState({stopIncrementingRating:!1}),a.recordResponse(e)}),50))},a.keyUpFunction=function(e){if(be.includes([81,69],e.keyCode)&&(a.isKeyDown[e.keyCode]=!1),a.setState({stopIncrementingRating:!0}),a.state.ratingWindow)if(a.timebox)setTimeout((function(){a.timebox=null,a.prevKey=null}),250);else if((1==be.last(a.response)?81:69)==e.keyCode){a.addTimestamp("rating");var t=(new Date).getTime();a.ratingsRaw.push(t-a.ratingStartTime)}},a.finishRatingWindow=function(){if(a.ratings.push(a.state.currentRating),a.ratings.length>a.ratingsRaw.length){a.addTimestamp("rating");var e=(new Date).getTime();a.ratingsRaw.push(e-a.ratingStartTime),a.setState({stopIncrementingRating:!0})}a.setState({index:a.state.index+1,ratingWindow:!1}),a.stimulusTimer=setTimeout(a.playStimulus,1e3+a.jitter())},a.state={index:0,showContrast:!1,responseWindow:!1,ratingWindow:!1,trialStarted:!1,complete:!1,invalid:!1,readyToStart:!1,dataSent:A(),currentRating:1,stopIncrementingRating:!1,stopShowingRating:!1},a.canvasRef=r.a.createRef(),a.audioContext=new fe,a.initialDelay=2e3,a.delay=2500,a.numAttempts=0,a.numAttemptsLimit=1e3,a.response=[],a.responseTime=[],a.ratings=[],a.ratingsRaw=[],a.timestamps=[],a.ratingTimer=void 0,a.stimulusTimer=void 0,a.componentStartTime=0,a.startTime=0,a.ratingStartTime=0,a.timebox=null,a.numIterations=0,a.isKeyDown={Q_KEY_CODE:!1,E_KEY_CODE:!1},a.prevKey=null,a}return Object(c.a)(n,[{key:"addTimestamp",value:function(e){"start"==e?(this.componentStartTime=(new Date).getTime(),this.timestamps.push([e,0])):this.timestamps.push([e,(new Date).getTime()-this.componentStartTime])}},{key:"playVisualStimulus",value:function(e){var t=this;this.setState({showContrast:!0}),setTimeout((function(){t.setState({showContrast:!1})}),e)}},{key:"startTrial",value:function(){this.setState({trialStarted:!0}),this.stimulusTimer=setTimeout(this.playStimulus,this.initialDelay),function(e){console.log("Playing white noise via REAL playWhiteNoise at volume (dB):",g);for(var t=3*e.sampleRate,n=e.createBuffer(2,t,e.sampleRate),a=(n.getChannelData(0),0);a<n.numberOfChannels;a++)for(var r=n.getChannelData(a),l=0;l<n.length;l++)r[l]=(2*Math.random()-1)*T(g,.015,78.3);var o=e.createBufferSource();o.buffer=n,o.loop=!0,o.connect(e.destination),o.start(0)}(this.audioContext),this.addTimestamp("start")}},{key:"jitter",value:function(){return Math.random()/2*1e3}},{key:"shutdown",value:function(){this.addTimestamp("end"),this.saveDataToStore(),this.setState({complete:!0})}},{key:"saveDataToStore",value:function(){this.props.dataHandler(this.props.decibels,this.response,this.responseTime,this.ratings,this.ratingsRaw,this.timestamps)}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.keyDownFunction,!1),document.addEventListener("keyup",this.keyUpFunction,!1),be.isUndefined(P())&&this.setState({invalid:!0}),!1===this.state.complete&&setTimeout((function(){e.setState({readyToStart:!0})}),0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyDownFunction,!1),document.removeEventListener("keyup",this.keyUpFunction,!1),this.audioContext.close()}},{key:"render",value:function(){return this.state.invalid?r.a.createElement(m.a,{to:"/Error"}):this.state.dataSent?r.a.createElement(m.a,{to:"/ThankYou"}):this.state.complete?this.props.trialCompleteRenderer(this.props.decibels,this.response):r.a.createElement("div",{className:"Trial "+(this.state.trialStarted?"Trial-gray":"")},this.state.trialStarted?r.a.createElement("div",{className:"Trial-stimulus"},r.a.createElement(Ee,{showContrast:this.state.showContrast,showRatings:this.state.ratingWindow,currentRating:this.state.currentRating})):r.a.createElement("p",{className:"Trial-text"},this.state.readyToStart?r.a.createElement("span",null,"Press any key to begin"):r.a.createElement("span",null,"Loading...")))}},{key:"log_debug",value:function(){console.log("================================"),console.log("all decibels: "+this.props.decibels),console.log("all responses: "+this.response),console.log("all responseTime: "+this.responseTime),console.log("all timestamps: "+JSON.stringify(this.timestamps)),console.log("all ratingsRaw: "+this.ratingsRaw),console.log("all ratings: "+this.ratings),console.log("index: "+this.state.index),console.log("numAttempts: "+this.numAttempts),console.log("store: "+JSON.stringify(Y.store)),console.log("localStorage: "+JSON.stringify(localStorage)),console.log("================================\n")}}]),n}(a.Component));ve.defaultProps={decibels:pe.debug?be.shuffle([65,65,65,65]):be.concat([65],be.shuffle([0,0,0,0,0,65,65,65,65])),shouldRecordRatings:!1,trialCompleteRenderer:be.noop,responseHandler:be.noop,dataHandler:be.noop};var ye=ve,ke=n(15),ge=n(29);function Ce(e,t,n){function a(a,r,l,o){return ke.flatten([ke.fill(Array(a),0),ke.fill(Array(r),e),ke.fill(Array(l),t),ke.fill(Array(o),n)])}var r;return r=ge.debug?[a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0),a(1,1,1,0)]:[ke.concat(ke.fill(Array(8),n),ke.shuffle(a(1,0,1,5))),a(4,2,2,7),a(5,3,3,4),a(6,3,3,3),a(6,4,3,2),a(7,3,3,2),a(7,3,4,1),a(7,3,4,1),a(7,3,4,1),a(7,4,3,1),a(7,4,3,1),a(7,4,3,1)],ke.map(r,(function(e,t){return 0==t?e:ke.shuffle(e)}))}function we(e,t,n){if(ke.isUndefined(we.blocks))if(3==arguments.length)we.blocks=Ce(e,t,n);else{var a=L();if(!ke.isUndefined(a)){var r=a.intensities.c25,l=a.intensities.c50,o=a.intensities.c75;we.blocks=Ce(r,l,o)}}return we.blocks}var Te=n(148),Oe=n(29),Ne=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).responseHandler=function(e){a.index>=a.maxIndex-1||(a.index%2===0?(a.q1.update(a.state.decibels[a.index],e),a.pushDecibel(a.q1.quantile())):(a.q2.update(a.state.decibels[a.index],e),a.pushDecibel(a.q2.quantile()))),a.index++},a.trialCompleteRenderer=function(){return r.a.createElement(m.a,{to:"/Complete"})},a.dataHandler=function(e,t,n,r,l,o){var i,c,s=e.filter((function(e,t){return t%2===0})),u=t.filter((function(e,t){return t%2===0})),m=n.filter((function(e,t){return t%2===0})),d=e.filter((function(e,t){return t%2===1})),h=t.filter((function(e,t){return t%2===1})),E=n.filter((function(e,t){return t%2===1}));!function(e,t,n,a,r,l,o,i,c,s){var u=Y.store;u.quest={},u.quest.q1={},u.quest.q2={},u.quest.q1.decibels=n,u.quest.q1.response=a,u.quest.q1.responseTime=r,u.quest.q1.params=N.pick(e.params,I),u.quest.q2.decibels=l,u.quest.q2.response=o,u.quest.q2.responseTime=i,u.quest.q2.params=N.pick(t.params,I),u.quest.timestamps=c,u.quest.startTimestamp=s,Y.save()}(a.q1,a.q2,s,u,m,d,h,E,o,a.startTimestamp),i=a.q1,c=a.q2,Y.store.processedData=S.ProcessQuestData(i,c),Y.save();var b=L();we(b.intensities.c25,b.intensities.c50,b.intensities.c75)},a.startTimestamp=(new Date).getTime(),a.state={decibels:[]};var l=g-25,o=g-25;a.q1=new Te.Quest(l,5,.75,.1,.01,.01,.15,20),a.q2=new Te.Quest(o,5,.75,.1,.01,.01,.15,20);var c=Oe.debug?2:40;return a.index=0,a.maxIndex=2*c-1,a.state={decibels:[l+3,o-3]},a}return Object(c.a)(n,[{key:"pushDecibel",value:function(e){this.setState({decibels:[].concat(Object(te.a)(this.state.decibels),[e])})}},{key:"render",value:function(){return r.a.createElement(ye,{decibels:this.state.decibels,shouldRecordRatings:!1,trialCompleteRenderer:this.trialCompleteRenderer,dataHandler:this.dataHandler,responseHandler:this.responseHandler})}}]),n}(a.Component),Se=(n(15),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).trialCompleteRenderer=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a]==e[a]>0;return n>.7*e.length?r.a.createElement(m.a,{to:"/Continue"}):r.a.createElement(m.a,{to:"/OnceMore"})},a.dataHandler=function(e,t,n,r,l,o){j("practice",e,t,n,void 0,void 0,o,a.startTimestamp)},a.startTimestamp=(new Date).getTime(),a}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(ye,{shouldRecordRatings:!1,trialCompleteRenderer:this.trialCompleteRenderer,dataHandler:this.dataHandler})}}]),n}(a.Component)),xe=(n(15),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).trialCompleteRenderer=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a]==e[a]>0;return n>.7*e.length?r.a.createElement(m.a,{to:"/Continue_rating"}):r.a.createElement(m.a,{to:"/OnceMore_rating"})},a.dataHandler=function(e,t,n,r,l,o){j("practice_rating",e,t,n,r,l,o,a.startTimestamp)},a.startTimestamp=(new Date).getTime(),a}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(ye,{shouldRecordRatings:!0,trialCompleteRenderer:this.trialCompleteRenderer,dataHandler:this.dataHandler})}}]),n}(a.Component)),Ie=(n(328),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial_P"}):r.a.createElement("div",{className:"OnceMore"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"OnceMore-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"OnceMore-text"},r.a.createElement("br",null),r.a.createElement("br",null)," Nice job, but you didn't reach the required accuracy level, so make sure you are pressing the right keys at the right time.",r.a.createElement("br",null),r.a.createElement("br",null)," You will now have one more practice session. Get ready! Remember,",r.a.createElement("br",null),r.a.createElement("br",null)," a tone might play while the white noise continues when there are stripes on the screen.",r.a.createElement("br",null),r.a.createElement("br",null)," Press  ",r.a.createElement("font",{size:"+2"},"  ",r.a.createElement("b",null,' "Q"/YES ')," ")," if you ",r.a.createElement("b",null," DO "),"hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("font",{size:"+2"}," ",r.a.createElement("b",null,' "E"/NO ')," ")," if you ",r.a.createElement("b",null," DO NOT ")," hear the tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES TO BEGIN A SHORT PRACTICE SESSION'))))}}]),n}(a.Component)),Le=(n(329),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial_P_rating"}):r.a.createElement("div",{className:"OnceMore_rating"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"OnceMore_rating-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"OnceMore_rating-text"},r.a.createElement("br",null),r.a.createElement("br",null)," Nice job, but you didn't reach the required accuracy level, so make sure you are pressing the right keys at the right time,",r.a.createElement("br",null),r.a.createElement("br",null)," and holding the button down to indicate accuracy ratings. You will now have one more practice session. Get ready!",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES WHEN READY TO CONTINUE.'))))}}]),n}(a.Component)),Re=n(15),je=n(29),Pe=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).trialCompleteRenderer=function(e,t){return je.debug,r.a.createElement(m.a,{to:"/Break1"})},a.dataHandler=function(e,t,n,r,l,o){j(1,e,t,n,r,l,o,a.startTimestamp)},a.startTimestamp=(new Date).getTime(),a.state={decibels:Re.flatten(Re.slice(we(),0,3))},a}return Object(c.a)(n,[{key:"render",value:function(){return Re.isEmpty(this.state.decibels)?r.a.createElement(m.a,{to:"/Error"}):r.a.createElement(ye,{decibels:this.state.decibels,shouldRecordRatings:!0,trialCompleteRenderer:this.trialCompleteRenderer,dataHandler:this.dataHandler})}}]),n}(a.Component),De=n(15),Ae=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).trialCompleteRenderer=function(e,t){return r.a.createElement(m.a,{to:"/Break2"})},a.dataHandler=function(e,t,n,r,l,o){j(2,e,t,n,r,l,o,a.startTimestamp)},a.startTimestamp=(new Date).getTime(),a.state={decibels:De.flatten(De.slice(we(),3,6))},a}return Object(c.a)(n,[{key:"render",value:function(){return De.isEmpty(this.state.decibels)?r.a.createElement(m.a,{to:"/Error"}):r.a.createElement(ye,{decibels:this.state.decibels,shouldRecordRatings:!0,trialCompleteRenderer:this.trialCompleteRenderer,dataHandler:this.dataHandler})}}]),n}(a.Component),_e=n(15),Fe=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).trialCompleteRenderer=function(e,t){return r.a.createElement(m.a,{to:"/Break3"})},a.dataHandler=function(e,t,n,r,l,o){j(3,e,t,n,r,l,o,a.startTimestamp)},a.startTimestamp=(new Date).getTime(),a.state={decibels:_e.flatten(_e.slice(we(),6,9))},a}return Object(c.a)(n,[{key:"render",value:function(){return _e.isEmpty(this.state.decibels)?r.a.createElement(m.a,{to:"/Error"}):r.a.createElement(ye,{decibels:this.state.decibels,shouldRecordRatings:!0,trialCompleteRenderer:this.trialCompleteRenderer,dataHandler:this.dataHandler})}}]),n}(a.Component),Ye=n(15),Ue=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).trialCompleteRenderer=function(e,t){return r.a.createElement(m.a,{to:"/ThankYou"})},a.dataHandler=function(e,t,n,r,l,o){j(4,e,t,n,r,l,o,a.startTimestamp)},a.startTimestamp=(new Date).getTime(),a.state={decibels:Ye.flatten(Ye.slice(we(),9,12))},a}return Object(c.a)(n,[{key:"render",value:function(){return Ye.isEmpty(this.state.decibels)?r.a.createElement(m.a,{to:"/Error"}):r.a.createElement(ye,{decibels:this.state.decibels,shouldRecordRatings:!0,trialCompleteRenderer:this.trialCompleteRenderer,dataHandler:this.dataHandler})}}]),n}(a.Component),He=(n(82),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial_TT_2"}):r.a.createElement("div",{className:"Break"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Break-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Break-text"},"Great!",r.a.createElement("br",null),r.a.createElement("br",null)," Take a quick break. Three more to go!",r.a.createElement("br",null),r.a.createElement("br",null)," Remember: Continue to listen carefully and do the best you can.",r.a.createElement("br",null),r.a.createElement("br",null)," The task will continue to be difficult, but it is okay to guess and it is okay to be uncertain.",r.a.createElement("br",null),r.a.createElement("br",null)," Please focus your eyes on the ",r.a.createElement("b",null,"cross in the middle "),r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "Q"/YES ')," if you ",r.a.createElement("b",null," DO ")," hear a tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "E"/NO ')," if you ",r.a.createElement("b",null," DO NOT ")," hear a tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES TO CONTINUE WITH THE NEXT PART'))))}}]),n}(a.Component)),We=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial_TT_3"}):r.a.createElement("div",{className:"Break"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Break-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Break-text"},"Great!",r.a.createElement("br",null),r.a.createElement("br",null)," Great!!! Take a quick break. Two more to go!",r.a.createElement("br",null),r.a.createElement("br",null)," Remember: Continue to listen carefully and do the best you can.",r.a.createElement("br",null),r.a.createElement("br",null)," The task will continue to be difficult, but it is okay to guess and it is okay to be uncertain.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "Q"/YES ')," if you ",r.a.createElement("b",null," DO ")," hear a tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "E"/NO ')," if you ",r.a.createElement("b",null," DO NOT ")," hear a tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null)," Please focus your eyes on the ",r.a.createElement("b",null,"cross in the middle "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES TO CONTINUE WITH THE NEXT PART'))))}}]),n}(a.Component),Me=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){return!0===this.state.continue?r.a.createElement(m.a,{to:"/Trial_TT_4"}):r.a.createElement("div",{className:"Break"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"Break-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"Break-text"},"Great!",r.a.createElement("br",null),r.a.createElement("br",null)," Take a quick break. One more to go!",r.a.createElement("br",null),r.a.createElement("br",null)," Remember: Continue to listen carefully and do the best you can.",r.a.createElement("br",null),r.a.createElement("br",null)," The task will continue to be difficult, but it is okay to guess and it is okay to be uncertain.",r.a.createElement("br",null),r.a.createElement("br",null)," Please focus your eyes on the ",r.a.createElement("b",null,"cross in the middle "),r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "Q"/YES ')," if you ",r.a.createElement("b",null," DO ")," hear a tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Press ",r.a.createElement("b",null,' "E"/NO ')," if you ",r.a.createElement("b",null," DO NOT ")," hear a tone.",r.a.createElement("br",null),r.a.createElement("br",null)," Please respond as ",r.a.createElement("b",null," QUICKLY ")," and as ",r.a.createElement("b",null," ACCURATELY ")," as you ",r.a.createElement("b",null," POSSIBLY CAN "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),' PRESS "Q"/YES TO CONTINUE WITH THE NEXT PART'))))}}]),n}(a.Component),qe=(n(330),n(85)),Ve=n(29),Be=n(15),Qe=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).keyFunction=function(e){81===e.keyCode&&a.setState((function(e,t){return{continue:!0}}))},a.state={continue:!1,invalid:!1,sentData:!1,link:void 0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.keyFunction,!1);var t=P(),n=function(){var e=N.clone(Y.store);return e.taskName=O.taskName,e.taskVersion=O.taskVersion,e.WhiteNoiseDecibels=g,e.visualStim=f,e.auditoryStim=v,JSON.stringify(e)}();if(p?this.setState({link:"link"}):Be.isUndefined(D())?Object(qe.a)(t).then((function(t){return e.setState({link:t})})):this.setState({link:D()}),!A())return Ve.debug&&(console.log("encrypted metadata: "+t),console.log("store export: "+n),console.log("localStorage: "+JSON.stringify(localStorage))),F()?p?(_(!0),this.setState({sentData:!0}),void U()):void Object(qe.b)(t,n).then((function(){_(!0),e.setState({sentData:!0}),U()})):(Y.clear(),void this.setState({invalid:!0}));this.setState({sentData:!0})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyFunction,!1)}},{key:"render",value:function(){if(this.state.invalid)return r.a.createElement(m.a,{to:"/Error"});if(this.state.continue)window.location.assign(this.state.link);else if(!this.state.sentData||Be.isUndefined(this.state.link))return r.a.createElement("div",{className:"ThankYou"},r.a.createElement("p",{className:"ThankYou-text"},"Loading... (if stuck here for more than 30 seconds try refreshing a few times)"));return r.a.createElement("div",{className:"ThankYou"},r.a.createElement("input",{type:"hidden"}),r.a.createElement("header",{className:"ThankYou-header"},r.a.createElement("div",{className:"text-container"},r.a.createElement("p",{className:"ThankYou-text"},r.a.createElement("span",{className:"bigger"}," You finished the game! Thank you for helping science! "),r.a.createElement("br",null),r.a.createElement("br",null)," Please ",r.a.createElement("a",{href:this.state.link},"click here")," or press 'Q' to return to the survey.")),r.a.createElement("a",{href:"https://medicine.yale.edu/psychiatry/care/cmhc/",title:"Learn more about the Connecticut Mental Health Center",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:E.a,className:"Site-link",alt:"logo"}))))}}]),n}(a.Component),ze=(n(347),function(){return r.a.createElement("div",{className:"Error"},r.a.createElement("h3",null,"Something went wrong. Please try again."))}),Ke=function(){return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",exact:!0,component:M}),r.a.createElement(m.b,{path:"/Welcome",exact:!0,component:M}),r.a.createElement(m.b,{path:"/VolumeCalibrationInstructions",exact:!0,component:K}),r.a.createElement(m.b,{path:"/VolumeCalibration1",exact:!0,component:G}),r.a.createElement(m.b,{path:"/VolumeCalibration2",exact:!0,component:J}),r.a.createElement(m.b,{path:"/VolumeCalibration3",exact:!0,component:X}),r.a.createElement(m.b,{path:"/VolumeCalibration4",exact:!0,component:$}),r.a.createElement(m.b,{path:"/VolumeCalibration5",exact:!0,component:Z}),r.a.createElement(m.b,{path:"/VolumeCalibrationEnd",exact:!0,component:ee}),r.a.createElement(m.b,{path:"/Instructions",exact:!0,component:q}),r.a.createElement(m.b,{path:"/Trial_P",exact:!0,component:Se}),r.a.createElement(m.b,{path:"/OnceMore",exact:!0,component:Ie}),r.a.createElement(m.b,{path:"/Continue",exact:!0,component:Q}),r.a.createElement(m.b,{path:"/Trial_P_rating",exact:!0,component:xe}),r.a.createElement(m.b,{path:"/OnceMore_rating",exact:!0,component:Le}),r.a.createElement(m.b,{path:"/Continue_rating",exact:!0,component:z}),r.a.createElement(m.b,{path:"/TrialQ",exact:!0,component:Ne}),r.a.createElement(m.b,{path:"/Complete",exact:!0,component:B}),r.a.createElement(m.b,{path:"/Trial_TT_1",exact:!0,component:Pe}),r.a.createElement(m.b,{path:"/Break1",exact:!0,component:He}),r.a.createElement(m.b,{path:"/Trial_TT_2",exact:!0,component:Ae}),r.a.createElement(m.b,{path:"/Break2",exact:!0,component:We}),r.a.createElement(m.b,{path:"/Trial_TT_3",exact:!0,component:Fe}),r.a.createElement(m.b,{path:"/Break3",exact:!0,component:Me}),r.a.createElement(m.b,{path:"/Trial_TT_4",exact:!0,component:Ue}),r.a.createElement(m.b,{path:"/ThankYou",exact:!0,component:Qe}),r.a.createElement(m.b,{path:"/Error",exact:!0,component:ze}),r.a.createElement(m.b,{component:V}))},Ge=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ke,null))}}]),n}(a.Component),Je=n(8),Xe=n(13),$e=Object(Xe.a)();Object({NODE_ENV:"production",PUBLIC_URL:"/achshort5",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).NODE_CONFIG_DIR="../config",o.a.render(r.a.createElement(Je.a,{history:$e,basename:"/achshort5"},r.a.createElement(Ge,null)),document.getElementById("root"))},54:function(e,t,n){e.exports=n.p+"static/media/psych_logo.6956dbda.jpg"},82:function(e,t,n){},85:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(331),r=n(344),l=n(29);function o(t,n){return new Promise((function(o,i){var c=r.stringify({encrypted_metadata:t,data:n}),s={hostname:l.awsLambda.saveTaskData.host,port:443,path:l.awsLambda.saveTaskData.path,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(c)}},u=a.request(s,(function(e){e.setEncoding("utf8"),e.on("data",(function(){})),e.on("end",o)}));u.on("error",(function(e){l.debug&&(console.log("ERROR:"),console.log(e)),i(e)})),u.write(c),u.end()}))}function i(t){return new Promise((function(n,o){var i=r.stringify({encrypted_metadata:t}),c={hostname:l.awsLambda.fetchLink.host,port:443,path:l.awsLambda.fetchLink.path,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(i)}},s=a.request(c,(function(e){e.setEncoding("utf8");var t="";e.on("data",(function(e){t+=e})),e.on("end",(function(){return n(t)}))}));s.on("error",(function(e){l.debug&&(console.log("ERROR:"),console.log(e)),o(e)})),s.write(i),s.end()}))}}).call(this,n(7).Buffer)}},[[164,1,2]]]);
//# sourceMappingURL=main.c392f086.chunk.js.map